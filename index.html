<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <title>Sell Your Watch</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>
<body>
  <div class="form-container">
    <form id="watch-sell-form" enctype="multipart/form-data">
      <!-- Fields -->
      <label>Name and Last Name</label>
      <input type="text" name="full_name" required />

      <label>Email</label>
      <input type="email" name="email" required />

      <label>Phone</label>
      <input type="tel" name="phone" required />

      <label>Location</label>
      <select name="location" required>
        <option value="">Select</option>
        <option value="Canada">Canada</option>
        <option value="USA">USA</option>
      </select>

      <label>Model</label>
      <select name="model" id="model-select" required onchange="toggleOtherModel()">
        <option value="">Select</option>
        <option>Oyster Perpetual</option>
        <option value="Other">Other</option>
      </select>

      <div id="other-model-container" style="display:none;">
        <label>Please specify model</label>
        <input type="text" name="other_model" />
      </div>

      <label>Reference Number</label>
      <input type="text" name="reference" required />

      <label>Year</label>
      <select name="year" required>
        <option value="">Select</option>
        <option>2023</option>
        <option>2024</option>
        <option>2025</option>
      </select>

      <label>Complete Set?</label>
      <div class="checkbox-group" id="complete-set-group">
        <label><input type="checkbox" value="Outer Beige Box" /> Outer Beige Box</label>
        <label><input type="checkbox" value="Inner Green Box" /> Inner Green Box</label>
        <label><input type="checkbox" value="Warranty Card" /> Warranty Card</label>
        <label><input type="checkbox" value="Booklet & Holder" /> Booklet & Holder</label>
        <label><input type="checkbox" value="Warranty Manual" /> Warranty Manual</label>
      </div>

      <label>Condition</label>
      <select name="condition" required>
        <option value="">Select</option>
        <option>Brand New Unused</option>
        <option>Mint/Slider</option>
      </select>

      <label>Asking Price</label>
      <input name="asking_price" required />

      <label>Upload Photos</label>
      <input type="file" name="photos" accept="image/*" multiple required />

      <label>Instagram</label>
      <input type="text" name="instagram_username" />

      <button type="submit">Send</button>
    </form>
  </div>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("watch-sell-form");

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    const formData = new FormData(form);

    const checkboxes = document.querySelectorAll('#complete-set-group input[type="checkbox"]');
    const selected = Array.from(checkboxes).filter(c => c.checked).map(c => c.value);
    formData.append("complete_set_joined", selected.join(", "));

    const response = await fetch("https://script.google.com/macros/s/AKfycbxtxTcC0s9Tu0DvP8uEdxdzeeQp3suQ3xXjGSUp91rMHHeL9NMHJOTrOGbUzXEBtCbg/exec", {
      method: "POST",
      body: formData
    });

    const text = await response.text();
    if (text.includes("window.location.href")) {
      document.write(text);
    } else {
      alert("Unexpected response: " + text);
    }
  });

  function toggleOtherModel() {
    document.getElementById('other-model-container').style.display = document.getElementById('model-select').value === 'Other' ? 'block' : 'none';
  }
});
</script>
</body>
</html>
